 version: 2.1
 jobs:
   build:
    docker:
       - image: docker:18.03.0-ce-git
    steps: 
      - checkout
      - setup_remote_docker
      - run:
          name: Build & Push
          command: docker build -t sample .
      - run:
          name: Tag
          command: docker tag sample mynginx
      - run:
          name: Check image
          command: docker image ls
      - run:
          name: Run Container
          command: docker container run --rm -p 8000:80 -d sample

      - run: 
          command: sudo apt-get install mongodb-clients

      - run:
          name: LocalHost
          command: curl localhost
           
